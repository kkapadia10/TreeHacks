"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Internal = exports.guessKeyboardOverlayHeight = exports.getVirtualKeyboardOverlayHeight = exports.isVirtualKeyboard = void 0;
const _navigator = typeof navigator !== 'undefined' ? navigator : undefined;
function isVirtualKeyboard(navigator = _navigator) {
    return navigator != null && !!navigator.userAgent.match(/iphone|ipad|android/gi);
}
exports.isVirtualKeyboard = isVirtualKeyboard;
function getVirtualKeyboardOverlayHeight() {
    let offsetTop = 0;
    let visualViewportHeight = 0;
    if (window.visualViewport) {
        offsetTop = window.visualViewport.offsetTop;
        visualViewportHeight = window.visualViewport.height;
    }
    const viewportHeight = Math.max(document.documentElement.clientHeight, window.innerHeight);
    return Math.max(
    viewportHeight - visualViewportHeight - offsetTop, 
    0);
}
exports.getVirtualKeyboardOverlayHeight = getVirtualKeyboardOverlayHeight;
function guessKeyboardOverlayHeight(navigator = _navigator) {
    if (!isVirtualKeyboard(navigator)) {
        return 0;
    }
    if (window.innerHeight < window.screen.height - 240) {
        return 0;
    }
    return (Math.max(270, Math.min(340, window.screen.height * 0.45)) + (exports.Internal.isCanvaEditor(navigator) ? 80 : 0));
}
exports.guessKeyboardOverlayHeight = guessKeyboardOverlayHeight;
exports.Internal = {
    isCanvaEditor(navigator = _navigator) {
        return navigator != null && navigator.userAgent.indexOf('canvaeditor') >= 0;
    },
};
