"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.FileInputInternal = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const classnames_1 = require("classnames");
const mobx_react_1 = require("mobx-react");
const React = require("react");
const pointer_input_state_1 = require('../../../../a11y/pointer_input_state/pointer_input_state');
const button_1 = require('../../../../button/button');
const icon_1 = require('../../../../icons/uploads/icon');
const layout_1 = require('../../../../layout/layout');
const responsive_image_1 = require('../../../../responsive_image/responsive_image');
const typography_1 = require('../../../../typography/typography');
const file_input_css_1 = require("./file_input.css");
const file_input_messages_1 = require("./file_input.messages");
const file_input_illustration_1 = require("./file_input_illustration");
exports.FileInputInternal = (0, mobx_react_1.observer)(({ mode = 'droparea', variant = 'compact', multiple, accept, disabled, error, ariaControls, onClick: onClickProp, id, ariaLabelledBy, ariaDescribedBy, stretchButton, }) => {
    const onClick = React.useCallback((e) => {
        if (!disabled) {
            e.stopPropagation();
            onClickProp();
        }
    }, [disabled, onClickProp]);
    const uploadButton = ((0, jsx_runtime_1.jsx)(button_1.Button, { variant: "secondary", icon: icon_1.UploadsIcon, onClick: onClick, disabled: disabled, ariaControls: ariaControls, id: id, ariaLabelledBy: ariaLabelledBy, ariaDescribedBy: ariaDescribedBy, 
        stretch: stretchButton && mode === 'button', children: multiple ? file_input_messages_1.FileInputMessages.fileSelectorButtonText() : file_input_messages_1.FileInputMessages.fileSelectorButtonTextSingleFile() }));
    if (mode === 'button') {
        return uploadButton;
    }
    return ((0, jsx_runtime_1.jsx)(
        "div",
        { className: (0, classnames_1.default)(file_input_css_1.default.dropArea, {
                [file_input_css_1.default.error]: error,
                [file_input_css_1.default.disabled]: disabled,
                [file_input_css_1.default.hoverSupported]: !disabled && pointer_input_state_1.pointerInputState.isMouseInput,
            }), 
            onClick: onClick, children: (0, jsx_runtime_1.jsxs)(layout_1.Rows, { spacing: "1u", align: "center", children: [variant === 'display' && ((0, jsx_runtime_1.jsx)(responsive_image_1.PixelDensityResponsiveImage, { sources: (0, file_input_illustration_1.getUploadIllustrations)(accept), alt: "", className: file_input_css_1.default.illustration })), (0, jsx_runtime_1.jsx)("span", { className: file_input_css_1.default.subText, children: (0, jsx_runtime_1.jsx)(typography_1.Text, { tone: typography_1.InheritColor, size: "small", tagName: "span", alignment: "center", children: multiple ? file_input_messages_1.FileInputMessages.dropAreaText() : file_input_messages_1.FileInputMessages.dropAreaTextSingleFile() }) }), uploadButton] }) }
    ));
});
