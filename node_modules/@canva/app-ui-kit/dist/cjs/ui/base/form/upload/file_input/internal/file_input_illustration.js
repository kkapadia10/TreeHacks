"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getUploadIllustrations = exports.getUploadCategory = void 0;
const audio_1x_png_1 = require("./assets/upload_illustration/audio_1x.png");
const audio_2x_png_1 = require("./assets/upload_illustration/audio_2x.png");
const file_1x_png_1 = require("./assets/upload_illustration/file_1x.png");
const file_2x_png_1 = require("./assets/upload_illustration/file_2x.png");
const image_1x_png_1 = require("./assets/upload_illustration/image_1x.png");
const image_2x_png_1 = require("./assets/upload_illustration/image_2x.png");
const multiple_1x_png_1 = require("./assets/upload_illustration/multiple_1x.png");
const multiple_2x_png_1 = require("./assets/upload_illustration/multiple_2x.png");
const video_1x_png_1 = require("./assets/upload_illustration/video_1x.png");
const video_2x_png_1 = require("./assets/upload_illustration/video_2x.png");
const mimeTypeCategoryMap = new Map([
    ['image/', 'image'],
    ['video/', 'video'],
    ['audio/', 'audio'],
    ['application/', 'file'],
    ['text/', 'file'],
]);
const categoryExtensionMap = new Map([
    [
        'image',
        new Set(['.png', '.jpg', '.jpeg', '.gif', '.svg', '.heic', '.heif', '.apng', '.tiff']),
    ],
    [
        'video',
        new Set(['.mp4', '.mpeg', '.mpg', '.m4v', '.avi', '.mov', '.webm', '.wmv', '.mkv']),
    ],
    ['audio', new Set(['.mp3', '.wav', '.ogg', '.m4a', '.flac', '.wma', '.aac'])],
    [
        'file',
        new Set([
            '.pdf',
            '.ppt',
            '.pptx',
            '.doc',
            '.docx',
            '.xsl',
            '.xslx',
            '.csv',
            '.tsv',
            '.ai',
            '.psd',
            '.json',
        ]),
    ],
]);
const multipleCategoryIllustrations = [
    { pixelDensity: 1, src: multiple_1x_png_1.default },
    { pixelDensity: 2, src: multiple_2x_png_1.default },
];
const categoryIllustrationsMap = new Map([
    ['image', [{ pixelDensity: 1, src: image_1x_png_1.default }, { pixelDensity: 2, src: image_2x_png_1.default }]],
    ['video', [{ pixelDensity: 1, src: video_1x_png_1.default }, { pixelDensity: 2, src: video_2x_png_1.default }]],
    ['audio', [{ pixelDensity: 1, src: audio_1x_png_1.default }, { pixelDensity: 2, src: audio_2x_png_1.default }]],
    ['file', [{ pixelDensity: 1, src: file_1x_png_1.default }, { pixelDensity: 2, src: file_2x_png_1.default }]],
    ['multiple', multipleCategoryIllustrations],
]);
const getUploadCategory = (mimeTypes) => {
    let uploadCategory;
    if (mimeTypes == null || mimeTypes.length === 0) {
        return 'multiple';
    }
    for (const mimeType of mimeTypes) {
        let curCategory;
        for (const [pattern, category] of mimeTypeCategoryMap.entries()) {
            if (mimeType.startsWith(pattern)) {
                curCategory = category;
                break;
            }
        }
        if (curCategory == null) {
            for (const [category, extensions] of categoryExtensionMap.entries()) {
                if (extensions.has(mimeType)) {
                    curCategory = category;
                    break;
                }
            }
        }
        if (curCategory == null) {
            return 'multiple';
        }
        if (uploadCategory != null && curCategory !== uploadCategory) {
            return 'multiple';
        }
        uploadCategory = curCategory;
    }
    return uploadCategory !== null && uploadCategory !== void 0 ? uploadCategory : 'multiple';
};
exports.getUploadCategory = getUploadCategory;
const getUploadIllustrations = (mimeTypes) => {
    var _a;
    const category = (0, exports.getUploadCategory)(mimeTypes);
    return (_a = categoryIllustrationsMap.get(category)) !== null && _a !== void 0 ? _a : multipleCategoryIllustrations;
};
exports.getUploadIllustrations = getUploadIllustrations;
