"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Validation = void 0;
var Validation;
(function (Validation) {
    function valid() {
        return { state: 'valid' };
    }
    Validation.valid = valid;
    function invalid(error) {
        return error != null ? { state: 'invalid', error } : { state: 'invalid', error: true };
    }
    Validation.invalid = invalid;
    Validation.all = (validators) => (value) => {
        for (const validator of validators) {
            const result = validator(value);
            if (result.state === 'invalid') {
                return result;
            }
        }
        return Validation.valid();
    };
    Validation.anyOf = (validators) => (value) => {
        for (const validator of validators) {
            const result = validator(value);
            if (result.state === 'valid') {
                return result;
            }
        }
        return Validation.invalid();
    };
    function mapError(validator, mapFn) {
        return (val) => {
            const result = validator(val);
            if (result.state === 'invalid') {
                return invalid(mapFn(result.error));
            }
            return result;
        };
    }
    Validation.mapError = mapError;
    Validation.filterErrors = (results) => results.reduce((errors, result) => {
        result.state === 'invalid' && errors.push(result.error);
        return errors;
    }, []);
})(Validation || (exports.Validation = Validation = {}));
